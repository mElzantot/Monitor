@model TaskViewModel

<div id="subTaskView">
    <div style="border: 2px solid rgb(219, 219, 219) ; padding: 20px; border-radius: 8px;">
        <div class="righthead">
            <div class="ml-4 mb-3">
                <input type="text" value="@Model.TaskId" id="taskID" hidden />
                <div class="row">
                    <h4 class="mr-3 pt-2">
                        @Model.SubTasks[0].Task.Name
                    </h4>
                    <span class="alert alert-danger">@Model.SubTasks.Count() Sub Tasks</span>
                </div>
                <div class="text-muted"> @Model.taskDescription</div>
            </div>
            
            <div class="row" id="tasks">
                <table class="table table-hover text-center ">
                    <thead class="alert-info">
                        <tr>
                            <th>Name</th>
                            <th>Priority</th>
                            <th>start</th>
                            <th>Due</th>
                            <th>Status</th>
                            <th>Progress</th>
                            <th>Assigned to</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        @for (int i = 0; i < Model.SubTasks.Count(); i++)
                        {
                        <tr id="@Model.SubTasks[i].Id">
                            <td>@Model.SubTasks[i].Name</td>
                            <td>@Model.SubTasks[i].Priority</td>
                            <td>@Model.SubTasks[i].StartDate.Value.ToShortDateString()</td>
                            <td>@Model.SubTasks[i].EndDate.Value.ToShortDateString()</td>
                            <td>@Model.SubTasks[i].Status</td>
                            
                            <td><div class="progress"><div class="progress-bar" role="progressbar" style="width:@Model.SubTasks[i].Progress%;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">@Model.SubTasks[i].Progress%</div></div></td>
                            @if (@Model.SubTasks[i].Engineer != null)
                            {
                                <td>@Model.SubTasks[i].Engineer.UserName</td>
                            }
                        </tr>
                        }
                    </tbody>
                </table>
            </div>
            <hr />
            <button onclick="getSubTaskModal(@Model.TaskId)" type="button" class="btn btn-outline-success" >
                Add SubTask
            </button>
            <button type="button" class="btn btn-outline-primary" onclick="BacktoList()">Back to Tasks</button>
        </div>
    </div>
</div>

